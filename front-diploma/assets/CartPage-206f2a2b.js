import{a as C,_ as h,u as k}from"./CountClicker-4db12542.js";import{e as g,o as l,c as r,a as e,u as t,t as u,f as V,g as f,b as P,i as $,F as p,r as b,d as x}from"./index-80a0829c.js";const S={class:"card-of-cart"},B=["src","alt"],I={class:"card-of-cart-info"},N={key:0},O={__name:"CardOfCart",props:{modelValue:{type:Object,required:!0}},setup(n){const c=n,v=g(()=>`/img/goods/${c.modelValue.id}.png`),d=C(),o=g({get:()=>d.itemInfo(c.modelValue.id),set:m=>d.setCount(c.modelValue.id,m)});return(m,a)=>(l(),r("div",S,[e("img",{class:"card-of-cart-img",src:t(v),alt:n.modelValue.name},null,8,B),e("div",I,[e("div",null,[e("div",null,u(n.modelValue.name),1),e("div",null,[n.modelValue.oldPrice?(l(),r("s",N,u(n.modelValue.oldPrice*t(o))+" ₽",1)):V("",!0),f(" "+u(n.modelValue.price*t(o))+" ₽ ",1)])]),e("div",null,[e("div",null,[P(h,{modelValue:t(o),"onUpdate:modelValue":a[0]||(a[0]=s=>$(o)?o.value=s:null)},null,8,["modelValue"])]),e("div",null,[e("button",{class:"add-to-cart",onClick:a[1]||(a[1]=s=>o.value=0)},"Удалить")])])])]))}};const q=e("h1",null,"Корзина",-1),F={class:"container-wrapper"},L={key:0,class:"cart container"},j={key:0},w={key:1,class:"text-center"},G={__name:"CartPage",setup(n){const c=C(),v=k(),d=g(()=>v.goodsList({ids:c.goods.map(s=>s.id)})),o=()=>c.goods=[],m=()=>{alert("Ваш заказ оформлен!"),o()},a=g(()=>{const s={price:0,oldPrice:0};for(let i of d.value){const _=c.itemInfo(i.id);s.price+=i.price*_,s.oldPrice+=(i.oldPrice??i.price)*_}return s});return(s,i)=>(l(),r(p,null,[q,e("div",F,[t(d).length?(l(),r("div",L,[(l(!0),r(p,null,b(t(d),(_,y)=>(l(),x(O,{"model-value":_,key:y},null,8,["model-value"]))),128)),e("h3",null,[f(" Итого: "),t(a).oldPrice!==t(a).price?(l(),r("s",j,u(t(a).oldPrice)+" ₽",1)):V("",!0),f(" "+u(t(a).price)+" ₽ ",1)]),e("div",{class:"cart-actions"},[e("button",{class:"catalog-button",onClick:m},"Оформить заказ"),e("button",{class:"catalog-button",onClick:o},"Очистить корзину")])])):(l(),r("h3",w,"Ваша корзина пуста"))])],64))}};export{G as default};
